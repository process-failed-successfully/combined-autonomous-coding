#!/bin/bash

# Resolve the absolute path of the repository root
# We use readlink -f to handle if this script is symlinked (e.g. in /usr/local/bin)
SCRIPT_PATH="$(readlink -f "${BASH_SOURCE[0]}")"
SCRIPT_DIR="$(dirname "$SCRIPT_PATH")"
REPO_ROOT="$(dirname "$SCRIPT_DIR")"

# Capture the current working directory as the workspace
export WORKSPACE_DIR="$(pwd)"

# Run the Python CLI using the virtual environment if available
cd "$REPO_ROOT"
export PYTHONPATH="$REPO_ROOT"

if [ -f "$REPO_ROOT/.venv/bin/python3" ]; then
    PYTHON_EXEC="$REPO_ROOT/.venv/bin/python3"
else
    PYTHON_EXEC="python3"
fi

"$PYTHON_EXEC" -m agents.cli "$@"
